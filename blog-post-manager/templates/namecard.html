<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100% python I swear</title>
    <style>
      body {
        font-family: sans-serif;
      }
      textarea {
        width: 100%;
        height: 200px;
      }
      iframe {
        width: 100%;
        height: 300px;
        border: 1px solid #ccc;
      }
      .form-container {
        margin-top: 20px;
      }
      .form-container input, .form-container textarea {
        width: 100%;
        margin-bottom: 10px;
        padding: 8px;
      }
      .form-container button {
        padding: 10px 20px;
      }
    </style>
  </head>
  <body>
    <h1>blog gen with html</h1>
    <textarea id="htmlbox" placeholder="u can edit. so cool"></textarea><br>
    <h2>show html</h2>
    <iframe id="shownhtml"></iframe>

    <div class="form-container">
      <h2>personal informaton scam form</h2>
      <form id="infoform">
        <input type="text" id="name" placeholder="name"><br>
        <input type="text" id="title" placeholder="profession"><br>
        <input type="email" id="email" placeholder="email"></textarea><br>
        <input type="url" id="website" placeholder="website"></textarea><br>
        <input type="url" id="github" placeholder="github"></textarea><br>
        <input type="file" id="img" accept="image/*">
        <button type="button" onclick="generateblog()">generate the blog</button>
      </form>
    </div>

    <script>
      const textarea = document.getElementById('htmlbox')
      const iframe = document.getElementById('shownhtml')

      textarea.addEventListener('input', () => {
        const content = textarea.value
        iframe.srcdoc = content
      })

      const defaultimg = 'https://www.booksie.com/files/profiles/22/mr-anonymous.png'

      function generateblog() {
        const name = document.getElementById('name').value;
        const title = document.getElementById('title').value;
        const email = document.getElementById('email').value;
        const website = document.getElementById('website').value;
        const github = document.getElementById('github').value;
        const imgfile = document.getElementById('img').files[0];
        const reader = new FileReader();
      
    reader.onload = function(e) {
          const img = e.target.result || defaultimg;
          const blogtemp = `
          <!DOCTYPE html>
          <html lang="en">
            <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <style>
                body {
                  font-family: sans-serif;
                }
                .sidebar {
                  margin: 0;
                  padding: 0;
                  width: 200px;
                  background-color: #f1f1f1;
                  position: fixed;
                  height: 100%;
                  overflow: auto;
                }

                .sidebar p {
                  text-align: center;
                }

                /* Sidebar links */
                .sidebar a {
                  display: block;
                  color: black;
                  padding: 16px;
                  text-decoration: none;
                }
                
                /* Active/current link */
                .sidebar a.active {
                  background-color: #04AA6D;
                  color: white;
                }

                /* Links on mouse-over */
                .sidebar a:hover:not(.active) {
                  background-color: #555;
                  color: white;
                }

                /* Page content. The value of the margin-left property should match the value of the sidebar's width property */
                div.content {
                  margin-left: 200px;
                  padding: 1px 16px;
                  height: 1000px;
                }

/* On screens that are less than 700px wide, make the sidebar into a topbar */
                @media screen and (max-width: 700px) {
                  .sidebar {
                    width: 100%;
                    height: auto;
                    position: relative;
                  }
                  .sidebar a {float: left;}
                  div.content {margin-left: 0;}
                }

/* On screens that are less than 400px, display the bar vertically, instead of horizontally */
                @media screen and (max-width: 400px) {
                  .sidebar a {
                    text-align: center;
                    float: none;
                  }
                }
                .form-container input, .form-container textarea {
                  width: 100%;
                  margin-bottom: 10px;
                  padding: 8px;
                }
                .form-container button {
                  padding: 10px 20px;
                }
                .circle-mask {
                  width: 150px;
                  height: 150px;
                  border-radius: 50%;
                  overflow: hidden;
                  display: flex;
                  justify-content: center;
                  align-items: center;
                }
                .circle-mask img {
                  width: 100%;
                  height: auto;
                }
              </style>

                <div class="sidebar">
                  <div class="cricle-mask">
                    <img src="${img}"></img>
                  </div>
                  <h1>${name}</h1>
                  <p>${title}</p>
                  <p><a href='mailto:${email}'>Email</a></p>
                  <p><a href='${website}'>Website</a></p>
                  <p><a href='${github}'>GitHub</a></p>
                </div>
              `
              textarea.value = blogtemp
              iframe.srcdoc = blogtemp
            }

              if (imgfile) {
                  reader.readAsDataURL(imgfile);
                } else {
                  reader.onload({ target: { result: defaultimg } })
                }
              }
    </script>
  </body>
</html>
